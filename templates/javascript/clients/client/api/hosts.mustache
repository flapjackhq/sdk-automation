{{#hasRegionalHost}}
export const REGIONS = [{{#allowedRegions}}'{{.}}'{{^-last}},{{/-last}}{{/allowedRegions}}] as const;
export type Region = (typeof REGIONS)[number];
export type RegionOptions = {region{{#fallbackToAliasHost}}?{{/fallbackToAliasHost}}: Region{{#fallbackToAliasHost}}|undefined{{/fallbackToAliasHost}}};
{{/hasRegionalHost}}

{{^hasRegionalHost}}
function getDefaultHosts({{#hostWithAppID}}appId: string{{/hostWithAppID}}): Host[] {
  {{#hostsWithoutVariables.size}}
  return [
    {{#hostsWithoutVariables}}
    {url: "{{{.}}}", accept: 'readWrite', protocol: 'https' },
    {{/hostsWithoutVariables}}
  ];
  {{/hostsWithoutVariables.size}}
  {{#uniqueHost}}
  {{/uniqueHost}}
  {{#hostWithAppID}}
  return (
    [
      {
        url: `${appId}-dsn.flapjack.io`,
        accept: 'read',
        protocol: 'https',
      },
      {
        url: `${appId}.flapjack.io`,
        accept: 'write',
        protocol: 'https',
      },
    ] as Host[]
  ).concat(
    shuffle([
      {
        url: `${appId}-1.flapjack.io`,
        accept: 'readWrite',
        protocol: 'https',
      },
      {
        url: `${appId}-2.flapjack.io`,
        accept: 'readWrite',
        protocol: 'https',
      },
      {
        url: `${appId}-3.flapjack.io`,
        accept: 'readWrite',
        protocol: 'https',
      },
    ])
  );
  {{/hostWithAppID}}
}
{{/hasRegionalHost}}

{{#hasRegionalHost}}
function getDefaultHosts(region{{#fallbackToAliasHost}}?{{/fallbackToAliasHost}}: Region{{#fallbackToAliasHost}}|undefined{{/fallbackToAliasHost}}): Host[] {
  const url = {{#fallbackToAliasHost}}!region ? '{{{hostWithFallback}}}' : {{/fallbackToAliasHost}} '{{{regionalHost}}}'.replace('{region}', region);

  return [{ url, accept: 'readWrite', protocol: 'https' }];
}
{{/hasRegionalHost}}